<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <style>
     * {
        box-sizing: border-box;
     }
     html, body {
        width: 100% !important;
        height: 100% !important;
     }
  </style>
  
</head>
<body>

<div class="container-fluid w-100 h-100 p-0">
  <div class="row w-100 h-100 m-0 p-0">
    <div class="col-sm-4 h-100 border border-secondary p-0 m-0">
      <h3>Column 1</h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
    </div>
    <div class="col-sm-8 h-100 border border-secondary p-0 m-0">
        <canvas id="myCanvas" style="width:100%;height:100%;border: 1px solid black;">
        Sorry, your browser does not support canvas.
        </canvas>
    </div>
  </div>
</div>

<script>

function getMapData(selector, cSize=25) {
    const data = {};
    const canvasElm = (selector) ? $(selector) : [];
    let initW = (canvasElm.length) ? parseFloat(canvasElm.width()) : null;
    let initH = (canvasElm.length) ? parseFloat(canvasElm.height()) : null;
    
    if (canvasElm.length && !isNaN(parseFloat(initW)) && !isNaN(parseFloat(initH)) && !isNaN(parseFloat(cSize))) {
        cSize = parseFloat(cSize);
        const rightWMax = (initW-(initW%cSize));
        const rightHMax = (initH-(initH%cSize));

        data['w'] = (rightWMax === initW) ? initW : rightWMax;
        data['h'] = (rightHMax === initH) ? initH : rightHMax;
        data['widthNeedFix'] = (data['w'] === initW) ? false : true;
        data['heightNeedFix'] = (data['h'] === initH) ? false : true;
        data['rowCellsCount'] = (data['w'] / cSize);
        data['rowsCount'] = (data['h'] / cSize);
        data['canvas'] = canvasElm;
        data['ctx'] = data['canvas'][0].getContext("2d");
        return data;
    } else {
        throw `Please provide valid args selector of canvas and numberic size of cell, selector->${selector} - cSize->${cSize}`;
    }
}

function initMap(selector, cSize) {
   const mapData = getMapData(selector, cSize);
   ((mapData.widthNeedFix) ? console.log(`updated width abit smaller ${mapData.w}`) : null);
   ((mapData.heightNeedFix) ? console.log(`updated height abit smaller ${mapData.h}`) : null);
   
   /* as init the width and height will set by js, also if width was nice no change */
   mapData.canvas[0].width = mapData.w;
   mapData.canvas[0].height = mapData.h;
   const w = mapData.w;
   const h = mapData.h;
   const ctx = mapData.ctx;
   for (let r=0; r<mapData.rowsCount; r++) {
       for (let c=0; c<mapData.rowCellsCount; c++) {
          const cellStartX = (cSize * c);
          const cellStartY = (cSize * r);
          ctx.rect(cellStartX, cellStartY, cSize, cSize);
       }
   }
   /* one time draw after all added (DocumentFragment algo)*/
   ctx.stroke();
}
initMap("#myCanvas", 40);

$(window).on('resize', ()=>{initMap("#myCanvas", 40);});
</script>

</body>
</html>
